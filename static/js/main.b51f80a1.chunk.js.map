{"version":3,"sources":["components/Elcap.js","App.js","index.js"],"names":["Column","Table","HeaderCell","Cell","Elcap","props","keys","emptyOptions","getEmptyOptions","tableHeight","window","innerHeight","state","loading","data","table","options","selectedOptions","selectOption","bind","clear","console","log","winHeight","fetch","then","response","json","setState","getFullOptions","reduce","acc","key","this","set","arr","Set","map","i","sort","a","b","replace","value","label","Object","forEach","length","filter","item","some","style","padding","height","CheckPicker","size","searchable","placeholder","onSelect","onClean","minWidth","marginRight","Button","appearance","onClick","virtualized","affixHeader","bordered","width","align","dataKey","flexGrow","Component","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b51f80a1.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Table, CheckPicker, Button } from 'rsuite';\r\n\r\nconst { Column, HeaderCell, Cell } = Table;\r\n\r\nclass Elcap extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.keys = ['manufacture', 'series', 'cap', 'volt', 'd', 'h'];\r\n    this.emptyOptions = this.getEmptyOptions(this.keys);\r\n    this.tableHeight = window.innerHeight - 100;\r\n    this.state = {\r\n      loading: true,\r\n      data: [],\r\n      table: [],\r\n      options: {},\r\n      selectedOptions: {},\r\n    };\r\n    this.selectOption = this.selectOption.bind(this);\r\n    this.clear = this.clear.bind(this);\r\n    console.log(this.winHeight)\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch('./data/data.json')\r\n      .then(response => response.json())\r\n      .then(data =>\r\n        this.setState({\r\n          loading: false,\r\n          data,\r\n          table: data,\r\n          options: this.getFullOptions(data),\r\n          selectedOptions: {},\r\n        })\r\n      );\r\n  }\r\n\r\n  getEmptyOptions(data) {\r\n    return data.reduce((acc, key) => {\r\n      acc[key] = [];\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  getFullOptions(data) {\r\n    return this.keys.reduce((set, key) => {\r\n      let arr = [...new Set(data.map(i => i[key]))];\r\n      if (key === 'volt') arr = arr.sort((a, b) => {\r\n        a = a.replace('V', '');\r\n        b = b.replace('V', '');\r\n        return a - b;\r\n      });\r\n      const options = arr.map(i => {\r\n        let data = {};\r\n        data.value = i;\r\n        data.label = i;\r\n        return data;\r\n      })\r\n      set[key] = options;\r\n      return set\r\n    }, {});\r\n  }\r\n\r\n  selectOption(arr, key) {\r\n    const selectedOptions = { ...this.state.selectedOptions };\r\n    selectedOptions[key] = [...arr];\r\n    let table = [...this.state.data];\r\n\r\n    Object.keys(selectedOptions).forEach(key => {\r\n      const arr = selectedOptions[key];\r\n      if (arr.length !== 0) {\r\n        table = table.filter(item => arr.some(i => i === item[key]));\r\n      }\r\n    })\r\n\r\n    this.setState({ selectedOptions, table });\r\n  }\r\n\r\n  clear() {\r\n    this.setState({\r\n      selectedOptions: this.emptyOptions,\r\n      table: [...this.state.data],\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n\r\n        <div style={{ height: 50 }}>\r\n\r\n          {this.keys.map(key => (\r\n            <CheckPicker\r\n              size=\"sm\"\r\n              key={key}\r\n              searchable={false}\r\n              placeholder={key}\r\n              data={this.state.options[key]}\r\n              onSelect={value => this.selectOption(value, key)}\r\n              onClean={() => this.selectOption([], key)}\r\n              value={this.state.selectedOptions[key]}\r\n              style={{ minWidth: 120, marginRight: 20 }}\r\n            />\r\n          ))}\r\n\r\n          <Button size=\"sm\" appearance=\"primary\" onClick={this.clear}>Очистить</Button>\r\n          {/* <Button size=\"sm\" appearance=\"link\" onClick={this.clear}>Скачать табличку для заказа</Button> */}\r\n\r\n          {/* <Button onClick={() => console.log(this.state)}>State</Button> */}\r\n\r\n        </div>\r\n\r\n        <Table\r\n          virtualized\r\n          affixHeader\r\n          bordered\r\n          loading={this.state.loading}\r\n          height={this.tableHeight}\r\n          data={this.state.table}\r\n        >\r\n\r\n          <Column width={100} align=\"center\">\r\n            <HeaderCell>id</HeaderCell>\r\n            <Cell dataKey=\"id\" />\r\n          </Column>\r\n\r\n          <Column width={150} align=\"center\">\r\n            <HeaderCell>Производитель</HeaderCell>\r\n            <Cell dataKey=\"manufacture\" />\r\n          </Column>\r\n\r\n          <Column width={100} align=\"center\" >\r\n            <HeaderCell>Серия</HeaderCell>\r\n            <Cell dataKey=\"series\" />\r\n          </Column>\r\n\r\n          <Column width={100} align=\"center\" >\r\n            <HeaderCell>Емкость, uF</HeaderCell>\r\n            <Cell dataKey=\"cap\" />\r\n          </Column>\r\n\r\n          <Column width={100} align=\"center\" >\r\n            <HeaderCell>Напряжение, V</HeaderCell>\r\n            <Cell dataKey=\"volt\" />\r\n          </Column>\r\n\r\n          <Column width={100} align=\"center\" >\r\n            <HeaderCell>Diameter</HeaderCell>\r\n            <Cell dataKey=\"d\" />\r\n          </Column>\r\n\r\n          <Column width={100} align=\"center\" >\r\n            <HeaderCell>Height</HeaderCell>\r\n            <Cell dataKey=\"h\" />\r\n          </Column>\r\n\r\n          <Column width={120} align=\"center\" >\r\n            <HeaderCell>Кратность заказа</HeaderCell>\r\n            <Cell dataKey=\"min\" />\r\n          </Column>\r\n\r\n          <Column width={100} align=\"center\" >\r\n            <HeaderCell>Price, RUB</HeaderCell>\r\n            <Cell dataKey=\"sell\" />\r\n          </Column>\r\n\r\n          <Column flexGrow={1}>\r\n            <HeaderCell>Full Name</HeaderCell>\r\n            <Cell dataKey=\"fullData\" />\r\n          </Column>\r\n\r\n        </Table>\r\n\r\n        {/* <div style={{lineHeight: \"50px\"}}> */}\r\n          {/* Total: {this.state.table.length} */}\r\n          {/* <Pagination\r\n            activePage={this.state.page}\r\n            total={this.state.table.length}\r\n          /> */}\r\n        {/* </div> */}\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default Elcap;\r\n","import React from 'react';\nimport Elcap from './components/Elcap';\n\nconst App = () => {\n  return (\n    <Elcap />\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'rsuite/dist/styles/rsuite-default.css';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}